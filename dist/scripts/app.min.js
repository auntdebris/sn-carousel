!function(){for(var e,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],r=n.length,i=window.console=window.console||{};r--;)e=n[r],i[e]||(i[e]=t)}(),function(e){var t,n,r,i=e.event,o={_:0},l=0;t=i.special.throttledresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(a,s){var d=this,c=arguments;n=!0,r||(setInterval(function(){l++,(l>t.threshold&&n||s)&&(a.type="throttledresize",i.dispatch.apply(d,c),n=!1,l=0),l>9&&(e(o).stop(),r=!1,l=0)},30),r=!0)},threshold:0}}(jQuery);
!function(t,e,o,i){function s(e,o){this.element=e,this.options=t.extend({},a,o),this._defaults=a,this._name=n,this.itemElems=[],this.itemTmpl=t("#"+this.options.loadFromJSON.template).html(),this.itemContainer=t(this.element).find("."+this.options.container.className),this.dots=[],this.init()}var n="carousel",a={sizes:{small:400,medium:800,large:980},itemsPerPage:{small:1,medium:2,large:4},paths:{images:"images"},classes:{active:"active",disabled:"disabled",hidden:"hidden"},container:{className:"carousel__container"},controls:{className:"carousel__controls",allowKeyboard:!0,allowDrag:!0,allowTouch:!0,show:{small:!0,medium:!0,large:!0}},arrows:{className:"carousel__arrows",prev:{className:"carousel__arrow carousel__arrow--prev",text:"Previous page"},next:{className:"carousel__arrow carousel__arrow--next",text:"Next page"},show:{small:!0,medium:!0,large:!0}},dots:{className:"carousel__dots",dot:{className:"carousel__dot",text:"Page "},show:{small:!1,medium:!0,large:!0}},loadFromJSON:{enabled:!0,url:"",template:""},lazyload:!0};s.prototype.init=function(){var t=this;t.initItems(),t.handleResize()},s.prototype.isInViewport=function(){var o=this,i=t(e).height(),s=t(e).scrollTop(),n=t(o.element).offset().top,a=s+i;return a>n&&n+i+t(o.element).height()>a},s.prototype.getScreenSize=function(){var o=this;return o.windowWidth=t(e).width(),o.screenSize=o.windowWidth<=o.options.sizes.small?"small":o.windowWidth<=o.options.sizes.medium?"medium":"large",o.screenSize},s.prototype.getContainerSize=function(){var t=this;return t.containerSize=t.itemContainer.width(),t.containerSize},s.prototype.getNumCols=function(){var t=this;return t.numCols=t.options.itemsPerPage[t.getScreenSize()],t.numCols},s.prototype.getNumPages=function(){var t=this;return t.numPages=Math.ceil(t.itemCount/t.options.itemsPerPage[t.getScreenSize()]),t.numPages},s.prototype.handleResize=function(){var o=this,i=t.event.special.throttledresize?"throttledresize":"resize";t(e).on(i,{_this:this},function(t){o.resizeItems(),o.resizeContainer(),o.updateControlVisibility(),o.createControls()})},s.prototype.initItems=function(){var t=this;t.getItems()},s.prototype.getItems=function(){var e=this,o=e.options.loadFromJSON.url;t.getJSON(o,function(t){e.items=t.data.carousel.items,e.itemCount=e.items.length,e.createItems(),e.createControls()}).done(function(){}).fail(function(){}).always(function(){})},s.prototype.createItems=function(){function e(e,o){var s=0;return o.linkTitle=o.title,o.imgPath=i.options.paths.images,t.each(o,function(t,i){return e=e.replace("{{"+t+"}}",i),s++,s===o.length-1?e:void 0}),e}var o,i=this;i.itemContainer.empty().append("<ul>"),t.each(i.items,function(t,s){o=e(i.itemTmpl,s),i.itemContainer.find("ul").append(o),i.itemElems.push(o),t===i.items.length-1&&(i.currentPage=0,i.loadItemImages(),i.resizeItems(),i.resizeContainer())})},s.prototype.loadItemImages=function(){var e=this;e.options.lazyload||t.each(e.itemContainer.find("img"),function(e,o){t(o).attr("src",t(o).data("src"))})},s.prototype.resizeItems=function(){var e=this;e.containerSize=e.getContainerSize(),e.screenSize=e.getScreenSize(),e.numCols=e.getNumCols(),e.itemWidth=e.containerSize/e.numCols,e.numPages=e.getNumPages(),t.each(e.itemContainer.find("li"),function(o,i){t(i).width(e.itemWidth)})},s.prototype.resizeContainer=function(){var t=this;t.itemList=t.itemContainer.find("ul"),t.itemList.width(t.containerSize*t.numPages)},s.prototype.createControls=function(){var e=this;e.controls&&e.controls.remove(),e.controls=t("<div class="+e.options.controls.className+"><div></div></div>"),t(e.element).append(e.controls),e.createArrows(),e.createDots(),e.options.controls.allowKeyboard&&e.initKeyboard()},s.prototype.updateControls=function(){var t=this;t.updateArrows(),t.updateDots()},s.prototype.updateControlVisibility=function(){var t=this;t.updateArrowVisibility(),t.updateDotVisibility()},s.prototype.createArrows=function(){var e=this;e.arrowContainer=t("<div class="+e.options.arrows.className+">"),e.arrowPrev=t('<button class="'+e.options.arrows.prev.className+'"><i aria-hidden="true"></i><span class="visuallyhidden">'+e.options.arrows.prev.text+"</span></button>"),e.arrowNext=t('<button class="'+e.options.arrows.next.className+'"><i aria-hidden="true"></i><span class="visuallyhidden">'+e.options.arrows.next.text+"</span></button>"),e.arrowContainer.append(e.arrowPrev),e.arrowContainer.append(e.arrowNext),e.controls.find("> div").append(e.arrowContainer),e.initArrows()},s.prototype.initArrows=function(){var t=this;t.updateArrows(),t.updateArrowVisibility(),t.arrowPrev.on("click",function(){page=t.currentPage-1,t.goToPage(page)}),t.arrowNext.on("click",function(){page=t.currentPage+1,t.goToPage(page)})},s.prototype.updateArrows=function(){var t=this;t.arrowPrev.removeClass(t.options.classes.disabled),t.arrowNext.removeClass(t.options.classes.disabled),0===t.currentPage?t.arrowPrev.addClass(t.options.classes.disabled):t.currentPage===t.numPages-1&&t.arrowNext.addClass(t.options.classes.disabled)},s.prototype.createDots=function(){var e,o=this,i=0;for(o.dotContainer=t("<div class="+o.options.dots.className+">");i<o.numPages;)e=t('<button class="'+o.options.dots.dot.className+'"><i aria-hidden="true"></i><span class="visuallyhidden">'+o.options.dots.dot.text+i+"1</span></button>"),o.dotContainer.append(e),o.dots.push(e),i===o.numPages-1&&(o.controls.find("> div").append(o.dotContainer),o.initDots()),i++},s.prototype.initDots=function(){var e,o=this;o.updateDots(),o.updateDotVisibility(),o.dotContainer.find("button").on("click",function(){e=t(this).index(),o.goToPage(e)})},s.prototype.updateDots=function(){var e=this;t.each(e.dots,function(o,i){o===e.currentPage?t(i).addClass(e.options.classes.active):t(i).removeClass(e.options.classes.active)})},s.prototype.initKeyboard=function(){var e=this;t(o).on("keydown",function(t){e.isInViewport(e.element)===!0&&(37==t.keyCode&&(e.goToPage(e.currentPage-1),t.preventDefault()),39==t.keyCode&&(e.goToPage(e.currentPage+1),t.preventDefault()))})},s.prototype.updateArrowVisibility=function(){var t=this;t.arrowContainer.removeClass(t.options.classes.hidden),t.options.arrows.show[t.getScreenSize()]||t.arrowContainer.addClass(t.options.classes.hidden)},s.prototype.updateDotVisibility=function(){var t=this;t.dotContainer.removeClass(t.options.classes.hidden),t.options.dots.show[t.getScreenSize()]||t.dotContainer.addClass(t.options.classes.hidden)},s.prototype.goToPage=function(t){var e=this;t>=0&&t<e.numPages&&(e.currentPage=t,e.updateAllPages(),e.updateControls(),Modernizr.csstransforms3d?e.itemList.css({transform:"translate3d(-"+e.containerSize*t+"px,0,0)"}):Modernizr.csstransforms?e.itemList.css({transform:"translateX(-"+e.containerSize*t+"px)"}):Modernizr.csstransitions?e.itemList.css({left:-(e.containerSize*t)}):e.itemList.animate({left:-(e.containerSize*t)},400))},s.prototype.updateAllPages=function(){},t.fn[n]=function(e){return this.each(function(){t.data(this,n,new s(this,e))})}}(jQuery,window,document);
var $carousel=$("#test-carousel"),url=$carousel.data("item-url"),imgurl=$carousel.data("item-imgurl"),template=$carousel.data("item-tmpl"),carouselOptions={sizes:{small:400,medium:800,large:980},itemsPerPage:{small:1,medium:2,large:4},paths:{images:imgurl},classes:{active:"active",disabled:"disabled",hidden:"hidden"},container:{className:"carousel__container"},controls:{className:"carousel__controls",allowKeyboard:!0,allowDrag:!0,allowTouch:!0,show:{small:!0,medium:!0,large:!0}},arrows:{className:"carousel__arrows",prev:{className:"carousel__arrow carousel__arrow--prev",text:"Previous page"},next:{className:"carousel__arrow carousel__arrow--next",text:"Next page"},show:{small:!0,medium:!0,large:!0}},dots:{className:"carousel__dots",dot:{className:"carousel__dot",text:"Page "},show:{small:!1,medium:!0,large:!0}},loadFromJSON:{enabled:!0,url:url,template:template},lazyload:!1};$carousel.carousel(carouselOptions);